## 보경

### **운영체제의 정의**

컴퓨터 하드웨어의 바로 위에 설치되어 사용자에게 편리한 인터페이스 환경을 제공하고 컴퓨터 시스템의 자원을 효율적으로 관리하는 소프트웨어

### **운영체제의 역할(목표)**

- **CPU 스케줄링과 프로세스 관리** : CPU 소유권을 어떤 프로세스에 할당할 지, 프로세스의 생성/삭제, 자원 할당/반환 관리
- **메모리 관리** : 한정된 메모리를 어떤 프로세스에 얼만큼 할당해야 하는지 관리
- **디스크 관리** : 디스크 파일을 어떠한 방법으로 보관할 지 관리
- **I/O 디바이스 관리** : I/O 장치간 데이터를 주고받는것을 관리

### **운영체제의 구조**

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dc8f5ab0-2af6-4d8c-a8df-ebdaf8df1c00/Untitled.png)

- GUI : 사용자 인터페이스로 사용자의 명령을 커널에 전달하고 실행결과를 알려줌
- 커널 : 프로세스 관리, 메모리 관리, 저장장치 관리와 같은 운영체제의 핵심적인 기능을 모아놓은것
- 시스템 콜 : 운영체제가 커널에 접근하기 위한 인터페이스
  - 커널이 자신을 보호하기 위해 만든 인터페이스. 사용자나 응용 프로그램이 자원에 직접 접근하지 못하게 막음으로서 시스템 자원을 사용하기 위해서는 시스템 호출이라는 인터페이스를 사용
  - 동작원리 : 유저프로그램이 I/O 요청으로 트랩(trap)을 발동시키면 올바른 I/O 요청인지 확인한 후 유저모드가 시스템 콜을 통해 커널 모드로 변환되어 실행된다.
- 드라이버 : 하드웨어를 제어하기 위한 소프트웨어

### 컴퓨터의 요소

컴퓨터는 CPU(중앙처리장치), RAM(메모리), 입력장치, 출력장치, 저장장치로 구성

- CPU : 명령어를 해석하여 실행하는 장치
- RAM : 작업에 필요한 프로그램과 데이터를 저장하는 장소. 바이트 단위로 분할되어 있으며, 분할 공간마다 주소로 구분됨

인터럽트에 의해 메모리에 존재하는 명령어를 해석하여 실행하는 장치

### CPU

- 산술,논리연산장치(ALU, Arithmetic and Logical Unit) : 데이터의 산술연산과 논리연산을 수행
- 제어장치(CU, Control Unit)
  - CPU에서 작업을 통제하고 지시. 기억 장치로 부터 명령을 순차적으로 꺼내 해독하고 해석에 따른 작업 지시
- 레지스터(Register)
  - CPU 내에 데이터를 임시로 보관하는 공간으로 메모리 계층의 최상위에 위치하며 가장 빠른 속도로 접근 가능

### 인터럽트

CPU가 입출력 관리자에게 입출력 명령을 보낸 후, 입출력 관리자는 명령받은 데이터를 메모리에 가져다 놓거나, 메모리에 있는 데이터를 저장장치로 옮기는데 이러한 처리가 완료되고 **입출력 관리자가 CPU에게 보내는 신호**

### DMA 컨트롤러

I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치

### 메모리

전자회로에서 데이터나 상태 명령어 등을 기록하는 장치

### 메모리 계층

상위 계층일수록 속도가 빠르며 용량이 작고 비싸기 때문에 계층을 두어 관리한다.

- 레지스터 : CPU 안에 있는 작은 메모리. 휘발성, 속도 가장 빠름, 기억용량 가장 작음
- 캐시 : L1, L2 캐시 지칭. 휘발성, 속도 빠름, 기억용량 작음
- 주 기억장치 : RAM. 휘발성, 속도 보통, 기억용량 보통
- 보조기억장치 : HDD, SSD. 비휘발성, 속도 낮음, 기억용량 많음

### 지역성(Locality)

기억장치내의 정보를 균일하게 Access하는것이 아닌 어느 한 순간에 특정 부분을 집중적으로 참조하는 성질이 있다는 이론

- 시간 지역성 : 최근에 사용한 데이터에 다시 접근하려는 특성
  - 최근에 참조된 주소의 내용은 곧 다음에 다시 참조되는 특성
- 공간 지역성 : 최근에 접근한 데이터와 가까운참조된 주소와 인접한 주소의 내용이 다시 참조되는 특성

### 캐시

- 데이터를 미리 복사해놓는 임시 보관소로 두 장치간의 속도 차에 따른 병목 현상을 줄이기 위한 메모리

**캐시히트와 캐시미스**

CPU가 필요로 하는 데이터를 RAM으로 찾으러 가기전에 캐시에서 데이터의 존재여부를 확인하는데 이때 캐시메모리에 해당 데이터가 있는경우를 캐시 히트, 없는 경우를 캐시 미스라고 함

**캐시 매핑(Cache Mapping)**

캐시는 RAM보다 용량이 작기 때문에 캐시 미스가 발생할 수 밖에 없는데 다음과 같은 캐시 메모리 사상기법을 통해 캐시 적중률(캐시히트)을 높임

- **직접 매핑(Direct Mapping)** : RAM을 일정한 크기의 블록으로 나누어 각각의 블록을 캐시의 정해진 위치에 매핑
- **연관 매핑(Associate Mapping)** : 캐시 메모리의 빈 공간에 마음대로 주소를 저장하는 방식
- **집합 연관 매핑(Set Associate Mapping)** : 직접 매핑과 연관 매핑을 결합한 방식으로 빈 공간에 마음대로 주소를 저장하되, 미리 정해준 특정 행에만 저장하는 방식

**웹브라우저의 캐시**

- 쿠키 : 만료기한이 있는 키-값 저장소
- 로컬스토리지 : 만료기한이 없는 키-값 저장소
- 세션스토리지 : 만료기한이 있는 키-값 저장소

\*\* 참고로 데이터 베이스 위에 레디스라는 데이터베이스를 캐싱계층으로 두기도 한다.

### 가상 메모리

컴퓨터가 실제로 이용가능한 메모리 자원을 추상화하여 큰 메모리로 보이게 하는 것

### 페이지 부재(Page fault)

프로세스가 페이지를 요청했을때 해당 페이지가 가상메모리에는 존재하지만 실제 주소에는 없는 상황. 이

### 스레싱**(Threshing)**

프로세스의 원활한 수행에 요한 최소한의 page frame수를 할당받지 못해 페이지 부재로 작업이 멈춘것 같은 상태. 너무 많은 프로세스가 동시에 수행될 때 스레싱이 발생한다. 이를 해결할 수 있는 방법은 작업세트와 PFF가 있다.

## 미림

# 3.1 운영체제와 컴퓨터

### 운영체제의 목적

- 사용자가 컴퓨터를 편리하고 효율적으로 다룰 수 있도록, 시스템 자원을 관리하는 소프트웨어

<aside>
💡 펌웨어란? 운영체제와 유사하나, 하드웨어 내부에 포함되어 소프트웨어를 설치할 수 없는 소프트웨어

</aside>

### 운영체제의 역할

- **CPU 스케쥴링**: CPU 소유권을 어떤 프로세스에 할당할지 결정
- **프로세스 관리**: 자원을 어떤 프로세스에 할당할지 결정 & 프로세스 생성/삭제/중단/재개
- **메모리 관리**: 메모리를 어떤 프로세스에 얼만큼 할당할지 결정
- **디스크 파일 관리**
- **I/O 디바이스 관리**

### 운영체제의 구성

<aside>
💡 사용자 ↔ 응용 프로그램 ↔ **인터페이스 ↔ 시스템콜 ↔ 커널** ↔ 하드웨어

</aside>

- **인터페이스**
  - 사용자가 프로그램을 직접 제어하고 사용할 수 있게 하는 인터페이스
  - ex. GUI(ex. 바탕화면 그래픽), CUI(ex. 명령 프롬프트)
- **시스템콜(syscall)**
    <aside>
    💡 운영체제는 시스템 보안을 위해 `사용자 모드`와 `커널 모드`로 나뉘어 동작한다.
    `사용자 모드`는 컴퓨터 자원에 함부로 접근하지 못하도록 접근 가능한 영역을 제한한 모드이고, `커널 모드`는 모든 컴퓨터 자원에 접근 가능한 모드이다.
    
    </aside>
    
    <aside>
    💡 `modebit`가 0이면 커널 모드, 1이면 사용자 모드
    
    </aside>
    
    - 사용자 모드에서 컴퓨터 자원에 접근하려고 할 때 사용하는 인터페이스
    - 시스템콜을 통해 사용자 모드에서 커널 모드로 전환이 이루어지며, 명령을 수행하면 다시 사용자 모드로 전환됨
    - ex. `fork()`, `exit()`, `read()`, `write()`, `pipe()`
- **커널**
  - 운영체제의 핵심으로 컴퓨터 하드웨어에 대한 가장 기초 수준의 제어권을 가짐
  - 보안, 자원 관리 등 수행
  - ex. 메모리를 얼마나 쓸지, 어떤 프로세스를 실행할지, I/O 디바이스 제어 등

### 컴퓨터 구조

- CPU: 메모리에 적재된 프로세스의 명령어를 실행하는 중앙 처리 장치
  - `ALU(산술논리연산장치)`: 산술 연산(덧셈, 뺄셈)과 논리 연산(논리합, 논리곱)을 계산하는 장치
  - `레지스터`: CPU 내 임시 기억장치. CPU와 붙어 있어 연산 속도가 빠르고 용량은 적음.
  - `CU(제어장치)`: 레지스터에 데이터를 로드하고 ALU에 계산을 명령하는 등 프로세스 조작을 지시하는 장치
- 메모리 (3.2 참고)
- I/O 디바이스
- 타이머

# 3.2 메모리

### 메모리 계층

- 비교표
  |              | 개념                                                     | 휘발성 | 속도      | 용량      | 예시            |
  | ------------ | -------------------------------------------------------- | ------ | --------- | --------- | --------------- |
  | 레지스터     | CPU 내 임시기억장치                                      | O      | 매우 빠름 | 매우 작음 |                 |
  | 캐시         | 빠른 장치와 느린 장치 간 병목 현상을 줄이기 위한 메모리  | O      | 빠름      | 작음      | L1, L2 캐시     |
  | 주기억장치   | CPU에 빠르게 전달하기 위해 데이터를 임시 저장하는 메모리 | O      | 보통      | 보통      | RAM, ROM        |
  | 보조기억장치 | 데이터를 영구 보관하기 위한 메모리                       | X      | 느림      | 큼        | HDD, SSD, USB … |

### 캐시

- 데이터를 미리 복사해 놓는 메모리
- 레지스터는 메모리-CPU 간 캐시 계층, 메모리는 레지스터-보조기억장치 간 캐시 계층이라고 할 수 있음
- 자주 사용하는 데이터를 저장하여 효율을 극대화
- **지역성**: 자주 사용하는 데이터의 근거
  - 시간 지역성: “최근” 사용한 데이터
  - 공간 지역성: 최근 사용한 데이터와 “가까이” 있는 데이터
- 캐시히트와 캐시미스
  - 캐시히트: 원하는 데이터를 캐시에서 찾는 경우
  - 캐시미스: 원하는 데이터를 캐시에서 찾지 못해 주기억장치로 가 데이터를 찾는 경우
  - 캐시매핑: 캐시가 히트되기 위해 매핑하는 방법

### 가상 메모리

- 실제로는 분산된 메모리 공간들이 마치 하나의 메모리 덩어리인 것처럼 연속적으로 보이게끔 프로그램을 속이는 메모리 관리 방식

## 정욱

## 1. 운영체제와 컴퓨터

### 컴퓨터 시스템의 하드웨어 구성 요소

| 이름                                         | 설명                                                                                                                                                                     |
| -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 중앙 처리 장치(Central Processing Unit, CPU) | 컴퓨터 시스템을 통제하고 연산을 처리하는 장치. 연산을 실제로 수행하는 ALU와 임시 저장 공간인 레지스터를 포함한다.                                                        |
| 주 기억 장치(Computer Memory)                | 데이터와 명령을 일시적으로 기억하는 장치. 일반적으로 휘발성 메모리인 RAM을 가리킨다.                                                                                     |
| 보조 기억 장치(Computer Data Storage)        | 데이터와 명령을 반영구적으로 보존하는 장치. 일반적으로 하드 디스크와 같이 비휘발성 메모리인 자기 기억 장치 등을 가리킨다.                                                |
| 입출력 장치(Input/Output Device)             | 컴퓨터 외부에 연결되어 컴퓨터 내부와 정보를 교환하는 장치. 흔히 모니터/키보드/마우스/프린터 등을 가리킨다. 보조 기억 장치와 입출력 장치를 합쳐 ‘주변 장치’라고도 부른다. |

현대적인 컴퓨터는 전자식 기억 장치에 명령어를 저장하는 ‘프로그램 내장 방식’을 채택하고 있다. 프로그램 내장 방식은 명령어 및 데이터를 저장하는 방식에 따라 ‘폰 노이반 구조’와 ‘하버드 구조’의 두 가지로 나뉜다. 최근에는 메모리부터 CPU까지는 폰 노이만 구조, CPU 내 캐시 시스템은 하버드 구조를 사용하는 방식을 취하고 있다.

| 폰 노이만 구조 | 명령어와 데이터가 같은 시스템 버스와 메모리를 사용한다. 구조가 단순해 구현이 쉽고 구현 비용이 낮지만 병목 현상이 발생할 수 있다.                                                               |
| -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 하버드 구조    | 명령어와 데이터 메모리를 분리하여 취급하기 때문에 각 메모리의 시스템 버스가 따로 존재한다. 폰 노이만 구조의 병목 현상을 해결하기 위해 등장했지만 구조가 복잡해 구현이 어렵고 구현 비용이 높다. |

### 운영체제

운영체제는 컴퓨터 시스템의 한정된 자원을 관리하고, 사용자가 컴퓨터를 편리하게 사용할 수 있도록 인터페이스를 제공하는 소프트웨어이다. 하드웨어 위에 설치되어, 하드웨어와 소프트웨어를 연결하는 계층으로써 한정된 자원 내에서 정확하고 빠르게 주어진 문제를 해결하기 위해 사용한다.

### 운영체제의 목적, 평가 기준

| 처리량(throughput) 향상         | 자원 관리를 통해 일정 시간 내에 시스템이 처리하는 일의 양을 향상시킨다.   |
| ------------------------------- | ------------------------------------------------------------------------- |
| 반환 시간(turnaround time) 단축 | 사용자가 시스템에 요청한 작업을 완료할 때까지 소요되는 시간을 단축시킨다. |
| 가용성(availability) 향상       | 요구 기능을 요구 시간 동안 올바르게 수행할 수 있는 능력을 향상시킨다.     |
| 신뢰도(reliability) 향상        | 사용자의 입력 값에 대한 결과 값의 정확성을 향상시킨다.                    |

### 운영체제의 세 가지 개념

위에서 설명한 목적을 달성하기 위해, 운영체제는 세 가지의 요소를 다룬다.

| 가상화(Virtualization) | 물리적인 자원(CPU, 메모리, 디스크 등)을 편리하게 사용할 수 있도록 한다.                                        |
| ---------------------- | -------------------------------------------------------------------------------------------------------------- |
| 병행성(Concurrency)    | 여러 가지의 계산을 독립적으로 수행할 수 있도록 한다(https://roseline.oopy.io/dev/concurrency-and-parallelism). |
| 영속성(Persistance)    | 휘발성 기억장치에 기록된 정보를 지속적으로 저장할 수 있도록 한다.                                              |

### 운영체제의 구성 요소

| 커널(Kernel) | 운영체제의 핵심 요소로 CPU 스케줄링, 메모리 관리, 입출력 관리, 파일 시스템 관리 등을 담당한다. 커널에서 실제로 다루는 역할의 양에 따라 크게 모놀리식커널과 마이크로커널로 나뉜다. |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 셸(Shell)    | 운영체제 서비스를 인간 사용자 또는 다른 프로그램에게 노출하고, 사용자와 운영체제 간 상호작용을 관리한다. 컴퓨터의 역할에 따라 CLI 또는 GUI 형태로 제공된다.                       |

### 시스템 콜(System Call)

운영체제는 CPU가 명령어를 실행하는 모드를 운영체제 서비스를 제공받을 수 있는 **커널 모드**와 그렇지 못하는 **사용자 모드**로 구분한다. 사용자 모드로 실행되는 프로그램이 하드웨어 자원에 접근하기 위해서는 운영체제에 요청을 보내 커널 모드로 전환되어야 하는데, 이때 보내는 요청을 시스템 콜이라고 한다.

## 2. 메모리

### 가상 메모리

컴퓨터 시스템의 가용 메모리 자원을 이상적으로 추상화하여 사용자에게 매우 큰 하나의 메모리로 보이게 하는 메모리 관리 기법 중 하나이다. 다른 말로, 특정 시간 동안 CPU를 사용할 수 있도록 할당받은 프로세스가 혼자 메모리를 사용하는 것처럼 **가상화**한 것을 의미한다.

CPU가 프로세스를 처리할 때 보는 주소와 실제 메모리의 주소는 서로 다르기 때문에 둘 간의 변환이 필요하며, 이러한 동작을 하는 하드웨어 장치를 **‘메모리 관리 장치(Memory Management Unit, MMU)’**라고 한다.

### 메모리 계층 구조

기억 장치를 **응답 시간**에 기반하여 계층 구조로 분류한 것으로 다음의 두 가지 사실에 기반한다.

- **참조 지역성(Locality of Reference)**: CPU는 짧은 시간 동안 기억 장치의 특정 부분에 집중적으로 접근하는 경향이 있다.
  - 시간 지역성(Temporal locality): 한 번 참조된 영역은 이후에도 자주 참조되는 경향이 있다.
  - 공간 지역성(Spatial locality): 한 번 참조된 영역의 근처 영역 또한 참조되는 경향이 있다.
- **CPU와 기억 장치 간의 거리와 가격, 용량, 속도 사이의 관계**: CPU에서 물리적, 논리적으로 멀리 떨어져 있을수록 속도가 느려지고 용량이 커지며 가격이 저렴해진다.

---

상대적으로 속도가 느리고 용량이 큰 기억 장치에서 참조 지역성을 활용하여 자주/곧 사용할 데이터를 선택한 후 상대적으로 속도가 빠르고 용량이 작은 기억 장치로 옮긴다.

| 계층  | 메모리 타입    | 가격(1~4) | 용량(1~4) | 속도(1~4) | 거리(1~4) |
| ----- | -------------- | --------- | --------- | --------- | --------- |
| 0계층 | CPU 레지스터   | 4         | 1         | 4         | 1         |
| 1계층 | 캐시 메모리    | 3         | 2         | 3         | 2         |
| 2계층 | 주 기억 장치   | 2         | 3         | 2         | 3         |
| 3계층 | 보조 기억 장치 | 1         | 4         | 1         | 4         |

### 메모리 관리 전략

프로세스의 메모리 영역을 연속적으로 로드하느냐 나눠서 로드하느냐에 따라 연속 또는 비연속 메모리 할당이라고 부른다.

**연속 메모리 할당 방법**

| 고정 분할 방식 | 전체 메모리 영역을 일정한 크기로 분할한 뒤 각 영역에 프로세스를 할당하는 방식. 동시에 메모리에 올릴 수 있는 프로세스의 개수와 각 프로세스 크기가 제한되며, 단편화 문제가 발생할 수 있다.    |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 가변 분할 방식 | 할당할 프로세스의 크기에 따라 전체 메모리 영역을 분할하는 방식. 최초/최적/최악 적합 등의 메모리 할당 알고리즘을 이용해 가용 메모리 공간에서 프로세스가 로드될 수 있는 메모리 공간을 찾는다. |

**비연속 메모리 할당 방법**

| 페이징(Paging)             | 프로세스의 논리 메모리 영역을 페이지, 물리 메모리 영역을 프레임으로 나눈 후, 각각 번호를 할당해 페이지와 프레임을 매핑한다. 두 단위의 크기는 동일하다.                                                             |
| -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 세그멘테이션(Segmentation) | 프로세스의 메모리 영역을 서로 크기가 다른 논리적 내용 단위인 세그먼트로 분할하여 메모리를 할당한다. 각 세그먼트의 크기가 다르기 때문에 시작 주소와 세그먼트 크기를 별도로 관리하는 자료 구조를 가지고 있어야 한다. |

참조 지역성에 의해 프로세스 전체가 메모리가 올라오지 않아도 프로세스를 실행하는 데에 문제가 없음을 알 수 있으며, 덕분에 현재 실행에 필요한 프로세스의 일부만 메모리에 로드하고 나머지는 디스크에 둔 상태로 프로세스를 실행하는 ‘**요구 페이징(demand paging)’**이 가능하다.

프로그램 실행 시에 물리 메모리에 필요한 페이지가 없을 경우 이를 페이지 폴트(page fault)라고 하며, 일정 수 이상으로 다중 프로그래밍을 하면 페이지 폴트가 자주 일어나 실질적으로 CPU 이용률이 떨어지는 **스레싱(thrashing)**이라는 현상이 발생한다.
