## 보경

# 데이터베이스의 기본 개념

**데이터와 정보**

- 데이터 : 단순히 관찰하거나 측정하여 수집한 사실이나 값(자료)
- 정보 : 의사 결정에 유용하게 활용할 수 있도록 데이터를 처리해서 만든 유의미한 결과물
- 정보처리 : 데이터를 상황에 맞게 분석/해석하고, 데이터 간의 의미 관계를 파악하여 정보를 추출하는 과정이나 방법

**데이터베이스란?**

- 특정 조직의 여러 사용자가 **공유**해서 사용할 수 있도록 **통합**해서 **저장**한 **운영**데이터의 집합
- 공유데이터 : 여러 사용자가 함께 소유하고 사용할 수 있음
- 통합테이터 : 데이터의 중복을 최소화하고 통제가 가능한 중복만 허용
- 저장데이터 : 컴퓨터가 접근 할 수 있는 매체에 저장
- 운영데이터 : 조직의 주요 기능을 수행하기 위해 꼭 필요하며, 지속적으로 유지해야 하는 데이터

**데이터 베이스의 특징**

- 실시간 접근 : 사용자가 요구에 따라 실시간으로 응답 가능해야 함
- 계속 변화 : 데이터를 계속 삽입/삭제/수정하여 현실세계의 정확한 데이터를 유지
- 동시 공유 : 여러사용자가 동시에 서로다른/같은 데이터 사용하는 것을 지원
- 내용으로 참조 : 주소나 위치가 아닌 값으로 참조 가능(ex. 데이터 검색)

**데이터의 분류**

- 데이터는 형태에 따라 아래 세가지로 분류된다.
- 정형데이터
    - 미리 정해진 구조에 따라 저장된 데이터
    - ex) 엑셀의 스프레이 시트, RDBMS의 테이블
- 반정형데이터
    - 구조에 따라 저장된 데이터지만 정형 데이터와 달리 데이터 내용 안에 구조에 대한 설명이 존재
    - ex) HTML, XML, JSON 문서나 웹 로그, 센서데이터
- 비정형데이터
    - 정해진 구조 없이 저장된 데이터
    - 텍스트, 영상, 이미지,  PDF

# 데이터베이스 관리 시스템

**파일시스템**

- 데이터를 파일로 관리하기 위해 파일의 생성/삭제/수정/검색 기능을 제공하는 시스템
- 동일한 파일을 응용 프로그램에 필요한 형식에 맞도록 별도 관리해야 함
- 데이터의 중복성과 데이터의 종속성 문제 발생
    - 데이터 중복성(redundancy) : 동일한 내용의 파일이 여러개 생김. 하나 수정시 모든파일에 반영
    - 데이터 종속성(dependency) : 데이터와 응용프로그램 간 의존성을 가짐

**데이터 베이스 관리 시스템(DBMS)**

- 파일 시스템의 데이터 중복/종속 문제를 해결하기 위해 제시된 소프트웨어
- DB의 생성/접근/삭제/수정을 관리하며 문제가 발생하지 않도록 함

**DBMS의 주요 기능**

- 정의 기능 : 데이터베이스의 구조를 정의/수정
- 조작 기능 : 데이터를 삽입/삭제/수정/검색
- 제어 기능 : 데이터를 항상 정확하고 안전하도록 유지. (회복/보안/동시접근)

# 데이터 모델링

**데이터 모델링(DB 설계)**

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/32c36b0c-d9b4-422e-9140-e6ff26fb9695/a79cb280-c3d3-4ca7-84b4-c9506cfbdfdf/Untitled.png)

- 현실 세계의 데이터를 DB로 옮기는 과정. 즉 DB를 설계하는 것
- 데이터 모델링 = 개념적 모델링 + 논리적 모델링 + 물리적 모델링
- 개념적 모델링
    - 현실 세계에서 중요 데이터를 추출하여 개념 세계로 옮기는 작업
    - ex) 개체-관계 모델(E-R Model)
- 논리적 모델링
    - 개념적 모델링으로 표현된 데이터구조를 DB에 저장하는 구조로 표현하는 것
    - DBMS에 따라 표현 방법이 달라진다.
    - ex) 관계-데이터 모델(relational data model)
- 물리적 모델링
    - 논리적 모델링으로 표현된 데이터 구조를 실제 DB에 옮겨 테이블을 설계하는 과정

# 개체-관계 모델

**개체-관계 모델**

- 현실세계의 개체와 개체간의 관계를 개체(Entity), 속성(Attribute), 관계(Relation)로 기술하는 데이터 모델
- 피터 첸 표기법을 사용하여 개체-관계 모델을 그림으로 표현한 것이 개체-관계 다이어그램(ERD)

**개체(Entity)**

- 현실 세계에서 사람이나 사물과 같이 구별되는 모든 것
- 다른 개체와 구별과는 이름을 가지며 각 개체만의 고유한 속성을 하나 이상 가짐
- 개체를 구성하는 속성이 실제 값을 가짐으로 써 실체화 된 개체를 개체 인스턴스라 한다.
- ERD에서 네모로 표현. DB의 테이블이 엔티티로 표현된다.

**속성(Attribute)**

- 개체가 가지고 있는 고유 특성
- 여러가지 속성
    - 키 속성 : 다른 개체들과 중복되지 않는 고유한 값을 갖는 속성
    - 널 속성 : 널 값이 허용되는 속성
    - 복합 속성
        - 독립적인 속성이 모여서 만드는 속성
        - ex) 시, 분, 초 세개의 속성이 모여 시간의 속성을 만듬
    - 다중 값 속성
        - 하나의 속성이 여러개의 값을 가지는 속성
        - ex) 전공이 여러개 일 경우
    - 유도된 속성
        - 다른 속성 값에서 유도되어 결정되는 속성
        - ex) 총액, 평균 등
- ERD에서 원으로 표현. DB에서 테이블의 각 컬럼(필드)가 속성

**관계(Relation)**

- 개체간의 의미 있는 연관성
- 아래의 2가지 구조적 제약조건으로 표현
- 매핑 카디널리티
    - 관계를 맺는 두 엔티티가 몇개의 엔티티와 관련될 수 있는지 명시
    - 일대일, 일대다, 다대다로 표현 가능
- 참여 제약 조건
    - 관계를 맺는 두 엔티티가 의존성을 가지는지 명시
    - 전체참여, 부분참여로 표현 가능
    - ex) 학생은 과목을 수강할 필요가 없지만 과목은 항상 수강생이 있어야 함
- ERD에서 마름모 혹은 실선으로 표현

# **관계-데이터 모델**

**관계-데이터 모델**

- 하나의 개체에 대한 데이터를 릴레이션에 담아 표현하는 모델
- 릴레이션이라는 2차원의 테이블 구조로 표현한다.

**릴레이션**

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/32c36b0c-d9b4-422e-9140-e6ff26fb9695/4d41449b-a35c-4690-ada0-925c29cce1a3/Untitled.png)

- 하나의 개체에 대한 데이터를 저장하는 기본 단위
- 속성
    - 릴레이션의 각 열
    - 데이터의 특성을 설명
    - 필드라고도 하며 여러가지 타입을 가짐(타입은 DBMS마다 다름)
- 튜플
    - 릴레이션의 각 행
    - 한 개체에 대한 데이터
- 도메인 : 하나의 속성이 가질 수 있는 값의 집합
- 차수 : 하나의 릴레이션의 속성 개수
- 카더널리티 : 하나의 릴레이션의 튜플 개수
- 키
    - 릴레이션 내에서 튜플을 고유하게 식별하는 속성
    - 키의 종류 : 슈퍼키, 후보키, 기본키, 대체키, 외래키

**릴레이션의 특징** 

- 튜플의 유일성 : 하나의 릴레이션에는 동일한 튜플이 존재할 수  없음
- 튜플의 무순서 : 하나의 릴레이션에서 튜플 간의 순서는 무의미
- 속성의 무순서 : 하나의 릴레이션에서 속성 간의 순서는 무의미
- 속성의 원자성 : 속성 값으로 원자 값만 사용할 수 있음

**관계 - 데이터 모델의 제약조건**

- 무결성이란 ?
    - 데이터에 결함이 없는 상태. 즉 데이터가 정확하고 유효하게 유지된 상태
    - 관계 데이터 모델에서 정의하는 두가지 기본 제약 사항은 데이터를 정확하고 유효하게 유지하는 무결성을 보장해야한다는 규칙임
- 개체 무결성 제약조건
    - 기본키를 구성하는 모든 속성은 널 값을 가질 수 없음
- 참조 무결성 제약조건
    - 외래키는 참조할 수 없는 값을 가질 수 없다는 규칙

**관계 데이터 연산**

- 관계 데이터 모델에서 연산은 원하는 데이터를 얻기 위해 릴레이션에 필요한 처리요구를 하는 것
- 대표적으로 관계 대수와 관계 해석이 있음

# 데이터 베이스 언어 SQL

**SQL이란?**

- 관계 데이터 베이스를 위한 표준 질의어. 비절차 언어
- 데이터 조작어, 데이터 정의어, 데이터 제어어로 분류됨
- 모든 SQL문은 `;`로 문장 끝을 표시하며 대소문자를 구분하지 않음

**데이터 정의어(DDL)**

- DB를 구축하기 위해 스키마를 정의하거나 기존 스키마를 수정/삭제하는 언어
- ex) CREATE, ALERT, DROP, TRUNCATE, RENAME
    - CREATE : 테이블 생성
    
    ```sql
    CREATE TABLE 테이블명
    (
    	컬럼명 데이터타입 [제약조건],
    	컬럼명 데이터타입 NOT NULL,
    	컬럼명 데이터타입 CHECK(조건식)
    	컬럼명 데이터타입 DEFAULT 값,
    )
    ```
    
    - ALTER : 테이블 컬럼 추가, 컬럼 수정, 컬럼 삭제
    
    ```sql
    ALTER TABLE 테이블명 ADD 컬럼 데이터타입 [제약조건];
    ALTER TABLE 테이블명 MODIFY 컬럼 데이터타입 [제약조건];
    ALTER TABLE 테이블명 DROP 컬럼명;
    ```
    
    - DROP : 테이블 삭제
    
    ```sql
    DROP TABLE 테이블명 [CASCADE| RESTRICT];
    
    CASCADE : 참조하는 테이블까지 연쇄적으로 제거하는 옵션
    RESTRICT : 다른테이블이 삭제할 테이블을 참조중이면 제거하지 않는 옵션
    ```
    
    - TRUNCATE : 테이블 내의 데이터 삭제
    
    ```sql
    TRUNCATE TABLE 테이블명;
    ```
    
    - VIEW
    
    ```sql
    CREATE VIEW 뷰이름 AS
    SELECT
    FROM
    WHERE
    ---
    CREATE OR REPLACE VIEW 뷰이름 AS
    SELECT
    FROM
    WHERE
    ---
    DROP VIEW 뷰이름;
    ```
    
    - INDEX
    
    ```sql
    CREATE INDEX 인덱스명 ON 테이블명(컬럼명)
    ---
    ALTER INDEX 인덱스명 ON 테이블명
    ---
    DROP INDEX 인덱스명;
    ```
    

**데이터 조작어(DML)**

- 데이터를 검색/삽입/수정/삭제 등의 처리에 사용하는 언어
- ex) SELECT, INSERT, UPDATE, DELETE
    - SELECT : 데이터를 조회
    
    ```sql
    SELECT [DISTINCT] 속성명, 속성명,
    FROM 테이블이름
    WHERE 조건
    	(BETWEEN A AND B)
    	(LIKE 패턴)
    	(IS NULL)
    GROUP BY 속성명
    HAVING 그룹조건
    ORDER BY 속성 [ASC|DESC];
    * 서브쿼리 : 쿼리 안에 쿼리
    ```
    
    ```sql
    1. 내부조인
    SELECT A.책번호, 
    
    2. 왼쪽외부조인
    
    3. 오른쪽외부조인
    
    4. 완전외부조인
    
    5. 교차조인
    
    6. 셀프조인
    ```
    
    ```sql
    UNION : 중복이 제거됨
    UNION ALL : 중복을 허용
    INTERSECT : 공통적으로 존재하는 결과 반환
    MINUS : 첫쿼리에 있고 두번째 쿼리에 없는 결과 반환
    ```
    
    - INSERT : 데이터를 삽입
    
    ```sql
    INSERT INTO 테이블명 (속성명)
    VALUES (데이터)
    ```
    
    - UPDATE : 데이터를 수정
    
    ```sql
    UPDATE 테이블명
    SET 속성명 = 데이터
    WHERE 조건;
    ```
    
    - DELETE : 데이터를 삭제
    
    ```sql
    DELETE FROM 테이블명
    WHERE 조건;
    ```
    

**데이터 제어어(DCL)**

- DB가 무결성/보안/회복/동시성을 보장하기 위해 내부적으로 필요한 규칙이나 기법을 정의하는데 사용되는 언어
- ex)  GRANT, REVOKE
    - 권한 부여 / 권한 회수
    
    ```sql
    GRANT 권한 ON 테이블 TO 사용자
    REVOKE 권한 ON 테이블 FROM 사용자
    ```
    

**뷰**

- 다른 테이블을 기반으로 만든 가상 테이블
- 논리적으로만 존재하며 위의 쿼리문을 사용해서 뷰를 생성/삭제 할 수있다.

# **정규화**

**이상현상**

- DB를 잘못 설계할 경우 불필요한 중복이 발생하여 릴레이션에 대한 데이터의 삽입/삭제/수정 연산 시 발생하는 부작용
- 종류
    - 삽입 이상 : 새 데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야하는 문제
    - 갱신 이상 : 중복된 튜플 중 일부 튜플만 변경하여 데이터가 불일치하게 되는 모순
    - 삭제 이상 : 튜플 삭제 시 꼭 필요한 데이터까지 함께 삭제되는 데이터 손실

**함수 종속성**

- 하나의 릴레이션을 구성하는 속성들의 부분 집합을 X와 Y라 할 때, 어느 시점에서든 릴레이션 내의 모든 튜플에서 하나의 X 값에 대한 Y 값이 항상 하나면 "X가 Y를 함수적으로 결정한다." 또는 "Y가 X에 함수적으로 종속되어 있다."라고 한다.
- 릴레이션에서 속성 값은 계속 변할 수 있기 때문에 속성자체가 가지고 있는 특성과 의미를 기반으로 판단해야 한다.

**정규화**

- 이상현상이 발생하지 않도록 함수 종속성을 이용하여 릴레이션을 연관있는 속성들로만 구성되도록 분해하는 과정
- 정규형 원칙을 기반으로 졍규화를 시킴

**정규형**

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/32c36b0c-d9b4-422e-9140-e6ff26fb9695/e1acae8c-63b1-481b-8059-ac5685162585/Untitled.png)

- 릴레이션이 정규화 된 정도
- 제 1정규형
    - 모든 도메인이 더 이상 분해될 수 없는 원자 값으로만 구성되어야 함
- 제 2정규형
    - 릴레이션이 제 1정규형에 속하며, 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속 이여야 함
    - 릴레이션의 분해시 동등한 릴레이션으로 분해해야 하고, 정보 손실이 발생하지 않는 무손실 분해여야 함
- 제 3정규형
    - 릴레이션이 제 2정규형에 속하며, 기본키가 아닌 모든 속성이 이행적 함수 종속을 만족하지 않는 상태여야 함
    - 릴레이션을 구성하는 3개의 속성 집합 X, Y, Z에 대해 함수 종속 관계 X -> Y와 Y -> Z가 존재하면 논리적으로 X -> Z가 성립한다. 이때 속성 집합 Z가 속성 집합 X에 이행적으로 함수 종속되었다고 함
- 보이스/코드 정규형
    - 제 3정규형이며, 모든 결정자가 후보키인 상태
- 제 4정규형
    - 릴레이션이 보이스/코드 정규형에 속하며,  함수 종속이 아닌 다치 종속을 제거해야 함
- 제5정규형
    - 릴레이션이 제4정규형에 속하며, 후보키를 통하지 않는 조인 종속을 제거해야 함

# 트랜잭션

**트랜잭션이란 ?**

- 하나의 논리적 기능을 정상적으로 수행하기 위한 작업의 기본 단위

**트랜잭션의 특성(ACID)**

- 트랜잭션이 성공적으로 처리되어 데이터베이스의 무결성과 일관성이 보장되려면 네 가지 특성을 꼭 만족해야 한다.
- 원자성(Atomicity) : 분해가 불가능한 작업의 최소단위. 즉 트랜잭션의 연산이 모두 성공하거나 모두 실패해야 함
- 일관성(Consistency) : 트랜잭션이 수행된 이후 항상 일관된 데이터베이스 상태를 보존
- 격리성(Isolation) : 트랜잭션 실행 중 연산의 중간 결과를 다른 트랜잭션이 접근 불가
- 지속성/영속성(Durability) : 성공 완료된 트랜잭션의 결과는 영속적으로 데이터베이스에 저장

**트랜잭션 제어언어 TCL**

- 커밋(COMMIT) : 트랜잭션을 메모리에 영구적으로 저장(작업 완료)
- 롤백(ROLLBACK) : 오류가 발생했을 때, 오류 이전의 특정 시점 상태로 되돌려주는 제어어(작업 취소)
- 체크포인트(CHECKPOINT) : 롤백을 위한 시점을 지정

## 미림

# 4.1 데이터베이스 기본 개념

### 용어 설명

- **엔티티(개체)**
    - DB에 저장할 가치가 있는 대상으로, 여러 속성을 가짐
- **릴레이션**
    - DB에서 데이터를 구분하여 저장하는 기본 단위
    - 엔티티에 대한 데이터를 DB에서 릴레이션으로 관리 (⇒ 엔티티에 대한 물리적 모델)
    - 관계형: `테이블`, NoSQL: `컬렉션`
- **속성(attribute)/필드(field)/열(column)**
    - 엔티티가 갖는 여러 속성 중, 릴레이션에 저장하여 관리하는 항목
    - 한 릴레이션 내 속성의 총 개수를 `차수`라고 함 (≥ 1)
- **도메인**
    - 속성이 가질 수 있는 값의 집합 (⇒ 타입으로 표현 가능)
- **튜플(tuple)/행(row)**
    - 릴레이션의 행으로 표현되는 데이터
    - 릴레이션의 각 필드 별 값(=릴레이션의 한 행)
    - 한 릴레이션 내 튜플의 총 개수를 `카디날리티`라고 함 (≥ 0)
    - 관계형: `레코드`, NoSQL: `다큐먼트`

### **키**

- **키 생성 방식에 따른 분류**
    - 자연 키: 속성을 식별자로 사용하는 키
    - 인조 키: 인위적으로 생성된 키
- **키의 역할 및 제약 조건에 따른 분류**
    - **슈퍼 키**
        - 튜플을 고유하게 식별할 수 있는 속성들의 집합 (`유일성`)
        - 여러 속성을 묶어서 키로 사용할 수도 있음 (⇒ 복합 키)
    - **후보 키 (candidate key)**
        - 슈퍼 키 中 식별에 실질적인 도움이 되는 속성만으로 구성된 키 (`최소성`)
    - **기본 키 (PK, primary key)**
        - 후보 키 中 식별자로 사용하려는 키
        - NULL일 수 없음
    - **대체 키**
        - 후보 키 中 기본 키로 선택되지 않은 나머지 키
    - **외래 키(FK, foreign key)**
        - 다른 테이블의 기본 키를 참조한 키
        - 두 테이블 간 관계를 설정하는 데 사용됨
        - 외래 키는 중복 값 가능

### 관계(Relationship)

테이블 간 관계(Relationship)은 관계를 맺는 테이블 수에 따라 `1:1`, `1:N`, `N:M`으로 나뉜다.

# 4.2 ERD와 정규화 과정

### ERD(Entity Relationship Diagram, 개체관계도)

ERD란 엔티티 간 관계를 도식화한 것이다. ERD를 통해 데이터 간 관계를 파악할 수 있다.

[ERD 그리는 자세한 방법](https://inpa.tistory.com/entry/DB-%F0%9F%93%9A-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8%EB%A7%81-1N-%EA%B4%80%EA%B3%84-%F0%9F%93%88-ERD-%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8#erd_entity_relationship_diagram_%EA%B7%B8%EB%A6%AC%EA%B8%B0)

### 정규화 과정

데이터베이스의 정규화 과정이란 관계형 데이터베이스에서 데이터를 정규형(normal form)에 맞도록 구조화하는 과정을 말한다. 데이터베이스 내 데이터 중복을 줄이고 데이터 *무결성을 개선하는 것을 목적으로 한다. 제3정규형 데이터베이스의 대부분이 삽입, 변경, 삭제 이상이 없다.

1. 제1정규형(`1NF`): 릴레이션의 모든 도메인이 더 이상 분해될 수 없는 값(atomic value)로 구성
2. 제2정규형(`2NF`): 제1정규형 & 기본키를 제외한 모든 속성이 기본키에 **함수 종속**
    - **함수 종속이란?**
        
        <aside>
        💡 릴레이션 내 속성 집합 X, Y에 대해, X의 값 각각에 항상 Y의 값이 하나만 연관될 때, `Y는 X에 함수 종속`이라 하고, `X → Y`라고 표기한다. 이 때 X를 `결정자`, Y를 `종속자`라고 한다.
        
        </aside>
        
        X → Y라는 표기는 **X가 Y를 함수적으로 결정한다**는 뜻이다. 즉 어떤 튜플에서 X의 값이 주어지면 Y의 값을 구할 수 있다. 예를 들자면, “학생” 엔티티에 “학번”이라는 속성이 있을 때 “학번 → 다른 속성(ex. 이름/성별/…)”이다. 이 반대의 경우는 성립하지 않을 수 있다.
        
3. 제3정규형(`3NF`): 제2정규형 & 기본키를 제외한 모든 속성이 기본키에 **이행적 함수 종속이 아님**
    - **이행적 함수 종속이란?**
        
        <aside>
        💡 `X → Y`이고 `Y → Z`이면, 논리적으로 `X → Z`가 성립한다. 이 때 `Z는 X에 이행적 함수 종속`이라고 한다.
        
        </aside>
        
        이행적 함수 종속이 아니어야 한다는 말은, 릴레이션을 **최대한 독립적으로 분리**하라는 말이다.
        
        예를 들어 백화점 내 회원들은 모두 회원번호(PK)와 등급을 가지고 있고, 등급에 따라 할인율이 결정된다고 하자. 이는 “회원번호 → 등급”, “등급 → 할인율”로 표기할 수 있다. 이를 하나의 테이블로 나타내면 “회원번호 → 할인율”이 성립하므로, 비기본 속성(할인율)이 기본키(회원번호)에 이행적 함수 종속이라고 할 수 있다. 반면 테이블을 “회원번호에 따른 등급”과 “등급에 따른 할인율”로 분류할 경우, 이행적 함수 종속이 아니다.
        
4. 보이스/코드 정규형(`BCNF`): 제3정규형 & 결정자인 모든 속성이 후보키에 속함

<aside>
💡 ***무결성이란?**
데이터의 정확성, 일관성, 유효성을 유지하는 것을 말한다. 무결성이 보장되어야 DB의 데이터와 실제 값이 일치한다는 신뢰가 생긴다.

</aside>

# 4.3 트랜잭션

트랜잭션은 어떤 기능을 수행하기 위한 작업의 단위를 말한다. 쉽게 말해 특정 기능을 구현하는 데 필요한 쿼리들을 묶어 트랜잭션이라고 한다. 트랜잭션이 안전하게 수행되기 위해서 ACID(원자성, 일관성, 독립성, 지속성)를 보장해야 한다.

### 커밋과 롤백

- `커밋`: 트랜잭션이 성공적으로 수행되어 변경한 데이터가 데이터베이스에 영구 저장되는 것
- `롤백`: 트랜잭션 전으로 되돌리는 것

### 원자성(Atomicity)

트랜잭션과 관련된 작업들은 부분적으로 실행되다가 중단되지 않아야 한다.

예를 들어, 은행 송금 기능에 대한 트랜잭션은 다음 작업 과정을 갖는다.

1. A의 통장 잔고 조회
2. A의 잔고에서 N원 빼기
3. B의 잔고에 N원 넣기

2번까지 성공했으면 3번도 성공해야 한다. 만약 3번이 실패한다면 1, 2번도 실행되지 않아야 한다. 원자성은 이처럼 트랜잭션의 작업들이 완전히 성공하거나 완전히 실패하는 것을 보장하는 성질이다.

### 일관성(Consistency)

트랜잭션 처리 전과 처리 후 데이터 모순이 없어야 한다. 데이터베이스 내 데이터는 유효해야 하고, 허용된 방식으로만 데이터 변경이 일어나야 한다.

예를 들어, 은행 출금 기능에 대한 트랜잭션에서, 통장 잔고보다 더 큰 금액을 출금하는 것은 불가능하다. 이러한 일관성을 위반하는 트랜잭션은 중단되어야 한다.

### 독립성(Isolation)

트랜잭션을 수행할 때 다른 트랜잭션의 작업이 끼어들지 못해야 한다. 격리성과 동시성을 어느 정도 밸런스로 둘 것인지에 따라 격리 수준이 나뉜다. 아래 격리 수준에서 아래로 갈수록 격리성이 점점 낮아지고 동시성은 높아진다.

**격리 수준**

1. `SEREALIZABLE`: 트랜잭션을 순차적으로 실행시키는 것 ⇒ 성능 bad
2. `REPEATABLE_READ`: 한 트랜잭션이 수정한 튜플을 다른 트랜잭션이 수정하는 것을 막음 but 새 튜플 추가는 허용 ⇒ 이후 조회 시 새 튜플이 발견될 수 있음
3. **`READ_COMMITED`**: 다른 트랜잭션이 커밋한 데이터만 조회 가능 & 한 트랜잭션이 수정한 튜플을 다른 트랜잭션이 수정할 수 있음 ⇒ 팬텀 리드 문제
4. `READ_UNCOMMITED`: 다른 트랜잭션이 커밋하지 않은 데이터도 조회 가능 ⇒ 더티 리드 문제

<aside>
💡 **팬텀 리드(Phantom Read)란?**
한 트랜잭션 내에서 동일한 쿼리를 보냈을 때 조회 결과가 다른 경우를 말한다.

</aside>

<aside>
💡 **더티 리드(Dirty Read)란?**
한 트랜잭션이 실행 중일 때, 다른 트랜잭션에 의해 수정되었지만 아직 커밋되지 않은 데이터를 읽게 되어, 아직 커밋하지 않은 상태여도 수정된 데이터를 조회하는 경우를 말한다.

</aside>

### 지속성(Durability)

성공적으로 수행된 트랜잭션은 영원히 반영되어야 한다. 모든 트랜잭션은 로그로 남고, 시스템 장애가 발생하기 전 상태로 되돌릴 수 있어야 한다. 이를 위해 체크섬, 저널링, 롤백 등의 기능을 제공할 수 있다.

## 정욱

## ERD와 정규화 과정

### 데이터 모델링

복잡한 현실 세계(비즈니스 로직)를 **추상**화, **단순**화하여 일정한 표기법에 의해 ‘**명확**하게’ 표현하는 것으로, 프로그램 설계의 핵심이 되는 **데이터 구조**를 만드는 과정이다.

1. 현실 세계의 복잡한 개체에 대해 **개념적 모델링**을 수행 → 개념적 구조
2. 개념적 구조에 대해 **논리적 모델링**을 수행 → 논리적 구조
3. 논리적 구조에 대해 **물리적 모델링**을 수행→ 물리적 구조

<aside>
💡 학계와 업계에서 이야기하는 모델링 단계에는 약간의 차이가 있다고 한다! 학계에서는 개념적/논리적 모델링을 명확히 구분하고 논리적 모델링에서 테이블을 도출하지만 업계에서는 개념적/논리적 모델링을 동시에 수행하고 물리적 모델링에서 테이블을 도출한다고 한다…

</aside>

### 개체-관계 모델(Entity-Relationship Model)

데이터 모델링 방법 중 하나로, **개체(Entity)**와 이들 사이의 **관계(Relationship)**를 기본 요소로 이용하여 복잡한 현실 세계의 데이터를 구조화하는 방법이다.

| ER 모델의 주요 개념 | 설명 |
| --- | --- |
| 개체(Entity) | 어떤 행위를 할 수 있거나 정보를 가질 수 있으며, 각각 변별될 수 있는 것들의 집합. 집합 내 각각의 원소는 인스턴스(Instance)라고도 부름. 기획서에서 주로 명사로 등장함.

ex) 사람, 부서, 상품 등 |
| 속성(Attribute) | 개체의 특징을 기술하거나 개체가 소유하고 있는 정보의 종류. 기획서에서 주로 명사로 등장함.

ex) ‘사람’이라는 개체의 이름, 나이, 주소 등 |
| 값(Value) | 속성에 들어가는 구체적인 숫자 또는 문자 등의 값.

ex) FEDeepDive Organization의 repo 수 6 |
| 관계(Relationship) | 개체와 개체 사이의 관계. 특정 개체가 다른 개체에게 어떤 행위를 함으로써 형성됨. 기획서에서 주로 동사로 등장함.

ex) ‘정욱’은 GitHub 계정을 소유한다 |
| 고유 식별자(Unique IDentifier, UID) | 개체 인스턴스 각각을 구별시켜주는 속성 하나 또는 둘 이상의 그룹. Mandatory하며 Unique한 특성을 지닌 속성을 골라 지정한다. 개체 간에 관계를 가질 때 둘을 연결시키는 역할을 한다.

ex) Git commit Hash |

### 정규화

데이터 모델링 과정에 문제가 있어, 그 결과물인 테이블에 데이터를 삽입하거나 삭제/수정할 때 논리적으로 생기는 오류를 **이상(Anomaly) 현상**이라고 한다.

| 이상 현상 | 설명 |
| --- | --- |
| 삽입 이상(Insertion anomaly) | 테이블에 자료 추가 시 의도하지 않은 자료까지 함께 삽입해야만 추가가 가능한 현상 |
| 삭제 이상(Deletion anomaly) | 테이블의 어떤 정보 삭제 시 의도하지 않은 자료가 함께 삭제되는 현상 |
| 갱신 이상(Modification anomaly) | 테이블 내 중복된 데이터 중 일부만 수정되어 데이터 모순이 일어나는 현상 |

위와 같은 이상 현상을 예방하고 효과적인 연산을 수행하기 위해 필요한 과정이 바로 데이터 **정규화(Normalization)**이다. 하나의 테이블에 하나의 의미만 존재하도록 중복된 테이블을 분해하는 과정으로, 데이터의 일관성 및 데이터 중복의 최소화를 위해 수행한다.

<aside>
💡 기본키, 후보키 등의 용어를 이미 알고있다는 가정 하에 간단히 요약하여 정리하였음!

</aside>

| 중요 개념 | 설명 |
| --- | --- |
| 함수 종속성 | 테이블에서 속성 간 종속 관계. A 속성이 B 속성을 결정하는 경우 A를 결정자, B를 종속자라고 한다. 기본키의 부분집합이 결정자가 될 수 있는 부분적 함수 종속과 그렇지 않은 완전 함수 종속으로 나뉜다. |
| 이행적 종속 | A가 B의 결정자이며 B가 C의 결정자일 때, A가 C의 결정자라면 이를 이행적 종속이라고 한다. |

| 정규화 과정 | 설명 |
| --- | --- |
| 제1정규형(First Normal Form, 1NF) | 모든 속성 값이 더 이상 분해될 수 없는 원자값으로 구성되어야 한다. |
| 제2정규형(Second Normal Form, 2NF) | 1NF를 만족함과 동시에 부분적 함수 종속이 없어야 한다. |
| 제3정규형(Third Normal Form, 3NF) | 2NF를 만족함과 동시에 이행적 종속이 없어야 한다. |
| 보이스-코드 정규형(Boyce-Codd Normal Form, BCNF) | 3NF를 만족함과 동시에 모든 결정자가 후보키가 될 수 있어야 한다. |
| 제4정규형(Fourth Normal Form, 4NF) | BCNF를 만족함과 동시에 한 속성이 여러 속성의 결정자가 될 수 없어야 한다. |
| 제5정규형(Fifth Normal Form, 5NF) | 4NF를 만족함과 동시에 서로 연관성 없는 속성이 같은 테이블 내에 존재하지 않아야 한다.

A→B, A→C이지만 B→C는 서로 연관이 없는 경우 A→B 테이블과 A→C 테이블로 나누면 A 속성을 기준으로 합쳤을 때 5NF 이전의 테이블을 얻을 수 있다.
(즉, 조인 종속을 없애야 한다) |

## 트랜잭션과 무결성

### 무결성(Integrity)

1. 데이터베이스에 저장된 데이터와 실제 데이터가 일치하는 **정확성**
2. 데이터가 일정하게 유지되는 **일관성(또는 정합성)**

| 관계형 데이터베이스 무결성 제약조건(Constraint) | 설명 |
| --- | --- |
| 개체(Entity) 무결성 | 모든 엔티티(테이블)는 기본키를 가져야 하며, 기본키는 mandatory(필수적)하며 unique(고유)한 속성을 가진다. |
| 도메인(Domain) 무결성 | 엔티티(테이블)의 속성 값은 해당 속성이 가질 수 있는 값의 집합, 즉 도메인(정의역)에 속해야 한다. |
| 참조(Referential) 무결성 | 외래키 값은 참조하는 테이블의 기본키 값과 같거나 NULL이어야 한다. 참조할 수 없는 외래키 값은 가질 수 없다. |

이외에도 키 / NULL / 고유 / 업무 등 여러 무결성 제약 조건이 존재한다.

### DB 트랜잭션(Database Transaction)

관계형 데이터베이스에서 트랜잭션이란 ‘데이터베이스의 상태를 변화시키는 하나의 **논리적 기능 수행 단위**’이다.

1. 시스템에 장애가 일어나도 데이터베이스의 일관성을 유지하며 장애로부터 올바르게 회복할 수 있도록 하는 신뢰성 있는 작업 단위를 제공한다.
2. 동시에 데이터베이스에 접근하는 프로그램들 간에 격리를 제공한다.

### ACID

이론적으로 데이터베이스 트랜잭션이 지녀야 하는 속성들을 두문자어로 ACID라고 지칭한다.

| 이론적으로 트랜잭션이 가져야 하는 속성 | 설명 |
| --- | --- |
| 원자성(Atomic) | 부분적으로 실행되다 중단되지 않는 것을 보장하기 위해, 모두 반영되거나 전혀 반영되지 않는다는 특징. 하나의 트랜잭션은 더 작게 나눌 수 없는 최소 단위이다. |
| 일관성(Consistency) | 트랜잭션 처리 전후 데이터 모순이 없는 상태를 유지한다는 특징. 무결성 제약조건을 위반하는 트랜잭션은 중단되어야 한다. |
| 독립성(Isolation) | 트랜잭션 도중 다른 트랜잭션의 작업이 끼어들지 않도록 보장하는 특징. 트랜잭션 외부의 어떤 연산도 해당 트랜잭션 중간 단계의 값을 볼 수 없다. |
| 지속성(Durability) | 성공적으로 수행된 트랜잭션이 영원히 반영됨을 보장하는 특징. 보통 모든 트랜잭션은 로그 형태로 남으며 이를 이용해 장애 발생 전으로 되돌릴 수 있다. |

<aside>
💡 분산 파일 시스템의 일종인 분산 데이터베이스 시스템, 예를 들어 NoSQL을 이야기할 때 등장하는 CAP 이론도 한 번 눈여겨보면 좋을 듯?

→ CAP 이론은 분산 파일 시스템 전체에 적용되는 개념이지, 꼭 NoSQL에만 관련된 내용이 아님!

</aside>

## 영은

**데이터**

컴퓨터가 이해할 수 있는 형태로 저장한 정보

**데이터베이스**

데이터를 따로 저장하고 관리하는 프로그램

### ERD와 정규화 과정

**ERD** 

- 데이터베이스를 구축할 때 가장 기초적인 뼈대 작업⇒ 설계도 같은 역할
- 데이터베이스 구조를 시각적으로 표현하는 다이어그램
- 비정형데이터는 충분히 표현 할 수 없는 단점
- 엔티티, 어트리뷰트, 관계로 구성됨

[]()

**정규화과정**

데이터베이스에서 데이터 중복을 줄이고, 데이터 무결성을 유지하며, 효율적인 데이터 관리를 위해 테이블을 구조화하는 과정

⇒ 데이터베이스 설계 시 ERD와 정규화를 통해 데이터 무결성과 효율성을 높일 수 있음

### 트랜잭션과 무결성

**트랜젝션**

기능을 수행하기 위한 하나의 단위 (쿼리를 묶은 단위)

- ACID 속성이라고 불리는 네 가지 핵심 특성을 통해 데이터의 일관성과 신뢰성을 보장
- 데이터베이스의 무결성과 신뢰성을 유지하는 데 필수적

**무결성**

정확성, 일관성, 유효성을 유지하는 것

### 데이터베이스 종류

관계형 - MySQL이 대표적이고 가장 많이씀

노SQL - 대표적으로 MongoDB 

**MongoDB - 프론트엔드가 많이 사용하는이유**

- BSON으로 저장하기 때문에 JSON과 유사
    - 직렬화/역직렬화 JSON형식 그대로 저장하고 불러올 수 있어서 직관적이고 백과의 변환작업이 준다고 함.
- 스키마 없이 데이터를 삽입 가능
    - 다양한 도메인의 데이터베이스 기반으로 분석 로깅에 강점
    - 프론트엔드 개발자가 데이터를 저장할 때 스키마를 엄격하게 정의할 필요가 없음